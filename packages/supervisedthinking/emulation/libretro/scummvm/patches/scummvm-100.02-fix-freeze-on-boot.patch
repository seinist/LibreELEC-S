From 9c9e85c7a3235d7304eb411dba5611640eabd52e Mon Sep 17 00:00:00 2001
From: SupervisedThinking <supervisedthinking@gmail.com>
Date: Wed, 22 Dec 2021 14:11:51 +0100
Subject: [PATCH] libretro: fix up the freeze when loading the game on ARM
 (credits to MRFIXIT) -
 https://github.com/libretro/scummvm/issues/183#issuecomment-982913544

---
 backends/platform/libretro/libretro_os.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/backends/platform/libretro/libretro_os.cpp b/backends/platform/libretro/libretro_os.cpp
index 5e6a934acc39..0c9de8bb6716 100644
--- a/backends/platform/libretro/libretro_os.cpp
+++ b/backends/platform/libretro/libretro_os.cpp
@@ -673,7 +673,7 @@ class OSystem_RETRO : public EventsBaseBackend, public PaletteManager {
 					if (time_remaining > elapsed_time)
 					{
 						time_remaining = time_remaining - elapsed_time;
-						retro_sleep(1);
+						usleep(1000);
 					}
 					else
 					{
@@ -690,7 +690,7 @@ class OSystem_RETRO : public EventsBaseBackend, public PaletteManager {
 				// Use accurate method...
 				while(getMillis() < start_time + msecs)
 				{
-					retro_sleep(1);
+					usleep(1000);
 					retroCheckThread();
 					// Have to handle the timer manager here, since some engines
 					// (e.g. dreamweb) sit in a delayMillis() loop waiting for a
