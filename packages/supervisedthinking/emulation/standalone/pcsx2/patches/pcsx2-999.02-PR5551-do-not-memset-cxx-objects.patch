From b8aa00ccf7acc0718d7d5770bb6fedbbe29ff5e0 Mon Sep 17 00:00:00 2001
From: TellowKrinkle <tellowkrinkle@gmail.com>
Date: Sat, 19 Feb 2022 20:26:47 -0600
Subject: [PATCH] GS:OGL: Don't memset C++ objects

---
 pcsx2/GS/Renderers/OpenGL/GSDeviceOGL.cpp | 12 ------------
 pcsx2/GS/Renderers/OpenGL/GSDeviceOGL.h   | 18 +++++++++---------
 2 files changed, 9 insertions(+), 21 deletions(-)

diff --git a/pcsx2/GS/Renderers/OpenGL/GSDeviceOGL.cpp b/pcsx2/GS/Renderers/OpenGL/GSDeviceOGL.cpp
index 458094a9ccc..e8f769ad604 100644
--- a/pcsx2/GS/Renderers/OpenGL/GSDeviceOGL.cpp
+++ b/pcsx2/GS/Renderers/OpenGL/GSDeviceOGL.cpp
@@ -51,18 +51,6 @@ GSDeviceOGL::GSDeviceOGL()
 	, m_fbo_read(0)
 	, m_palette_ss(0)
 {
-	memset(&m_merge_obj, 0, sizeof(m_merge_obj));
-	memset(&m_interlace, 0, sizeof(m_interlace));
-	memset(&m_convert, 0, sizeof(m_convert));
-	memset(&m_fxaa, 0, sizeof(m_fxaa));
-#ifndef PCSX2_CORE
-	memset(&m_shaderfx, 0, sizeof(m_shaderfx));
-#endif
-	memset(&m_date, 0, sizeof(m_date));
-	memset(&m_shadeboost, 0, sizeof(m_shadeboost));
-	memset(&m_om_dss, 0, sizeof(m_om_dss));
-	memset(&m_profiler, 0, sizeof(m_profiler));
-
 	// Reset the debug file
 #ifdef ENABLE_OGL_DEBUG
 	m_debug_gl_file = fopen("GS_opengl_debug.txt", "w");
diff --git a/pcsx2/GS/Renderers/OpenGL/GSDeviceOGL.h b/pcsx2/GS/Renderers/OpenGL/GSDeviceOGL.h
index 3a67f7a533a..e5c86b0ff49 100644
--- a/pcsx2/GS/Renderers/OpenGL/GSDeviceOGL.h
+++ b/pcsx2/GS/Renderers/OpenGL/GSDeviceOGL.h
@@ -249,10 +249,10 @@ class GSDeviceOGL final : public GSDevice
 	{
 		std::string vs;
 		GL::Program ps[static_cast<int>(ShaderConvert::Count)]; // program object
-		GLuint ln; // sampler object
-		GLuint pt; // sampler object
-		GSDepthStencilOGL* dss;
-		GSDepthStencilOGL* dss_write;
+		GLuint ln = 0; // sampler object
+		GLuint pt = 0; // sampler object
+		GSDepthStencilOGL* dss = nullptr;
+		GSDepthStencilOGL* dss_write = nullptr;
 	} m_convert;
 
 	struct
@@ -269,8 +269,8 @@ class GSDeviceOGL final : public GSDevice
 
 	struct
 	{
-		GSDepthStencilOGL* dss;
-		GSTexture* t;
+		GSDepthStencilOGL* dss = nullptr;
+		GSTexture* t = nullptr;
 	} m_date;
 
 	struct
@@ -280,14 +280,14 @@ class GSDeviceOGL final : public GSDevice
 
 	struct
 	{
-		u16 last_query;
-		GLuint timer_query[1 << 16];
+		u16 last_query = 0;
+		GLuint timer_query[1 << 16] = {};
 
 		GLuint timer() { return timer_query[last_query]; }
 	} m_profiler;
 
 	GLuint m_ps_ss[1 << 8];
-	GSDepthStencilOGL* m_om_dss[1 << 5];
+	GSDepthStencilOGL* m_om_dss[1 << 5] = {};
 	std::unordered_map<ProgramSelector, GL::Program, ProgramSelectorHash> m_programs;
 	GL::ShaderCache m_shader_cache;
 
