From 3f2debf2710f84f42b999da2b7eb1f168205695f Mon Sep 17 00:00:00 2001
From: SupervisedThinking <supervisedthinking@gmail.com>
Date: Thu, 18 Nov 2021 13:28:38 +0100
Subject: [PATCH] cmake/FindWaylandProtocols: fix wayland protocol path
 generation for cross compile

---
 cmake/FindWaylandProtocols.cmake | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/cmake/FindWaylandProtocols.cmake b/cmake/FindWaylandProtocols.cmake
index 17859ed7c..6941f6024 100644
--- a/cmake/FindWaylandProtocols.cmake
+++ b/cmake/FindWaylandProtocols.cmake
@@ -6,8 +6,8 @@
 
 if(NOT WIN32)
     find_package(PkgConfig)
-    pkg_check_modules(PKG_WAYLAND_PROTOCOLS QUIET wayland-protocols)
-    set(WAYLAND_PROTOCOLS_PATH ${PKG_WAYLAND_PROTOCOLS_PREFIX}/share/wayland-protocols)
+    execute_process(COMMAND ${PKG_CONFIG_EXECUTABLE} --variable=pkgdatadir wayland-protocols
+       OUTPUT_VARIABLE WAYLAND_PROTOCOLS_PATH OUTPUT_STRIP_TRAILING_WHITESPACE)
     find_package_handle_standard_args(WAYLAND DEFAULT_MSG WAYLAND_PROTOCOLS_PATH)
     mark_as_advanced(WAYLAND_PROTOCOLS_PATH)
 endif()
